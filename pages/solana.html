<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solana ç¯„ä¾‹</title>
    <link rel="stylesheet" href="../styles/common.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
    <div class="container">
        <h1>â— Solana ç°½åèˆ‡äº¤æ˜“</h1>
        
        <nav class="nav-bar">
            <a href="../index.html">é¦–é </a>
            <a href="hash.html">é›œæ¹Šæ¼”ç®—æ³•</a>
            <a href="symmetric.html">å°ç¨±åŠ å¯†</a>
            <a href="asymmetric.html">éå°ç¨±åŠ å¯†</a>
            <a href="ethereum.html">Ethereum</a>
            <a href="bitcoin.html">Bitcoin</a>
            <a href="solana.html" class="active">Solana</a>
            <a href="cosmos.html">Cosmos</a>
                    <a href="tron.html">Tron</a>
            <a href="polkadot.html">Polkadot</a>
        </nav>

        <div class="info-box">
            <h4>â— Solana ç°½åèˆ‡äº¤æ˜“</h4>
            <p>Solana ä½¿ç”¨ Ed25519 ç°½åæ¼”ç®—æ³•ï¼Œä»¥é«˜æ•ˆèƒ½å’Œä½æˆæœ¬è‘—ç¨±ã€‚åœ°å€å°±æ˜¯ Ed25519 å…¬é‘°çš„ Base58 ç·¨ç¢¼ã€‚</p>
        </div>

        <div class="demo-section">
            <h3>1. ç”Ÿæˆ Solana éŒ¢åŒ…</h3>
            
            <div class="code-section">
                <div class="code-header">
                    <h4>ğŸ’» JavaScript ç¯„ä¾‹</h4>
                    <button class="copy-btn" onclick="copyCode(this, 'sol-wallet-code')">è¤‡è£½</button>
                </div>
                <pre><code id="sol-wallet-code" class="language-javascript">// ä½¿ç”¨ @solana/web3.js
const { Keypair } = require('@solana/web3.js');

// ç”Ÿæˆæ–°éŒ¢åŒ…
const keypair = Keypair.generate();
console.log("å…¬é‘°:", keypair.publicKey.toString());
console.log("ç§é‘° (Base58):", bs58.encode(keypair.secretKey));

// å¾ç§é‘°æ¢å¾©
const restored = Keypair.fromSecretKey(secretKey);

// Solana ä½¿ç”¨ Ed25519 ç°½åæ¼”ç®—æ³•
// åœ°å€å°±æ˜¯å…¬é‘°çš„ Base58 ç·¨ç¢¼</code></pre>
            </div>

            <button onclick="generateSolWallet()">ç”Ÿæˆ Solana éŒ¢åŒ…</button>
            <div id="solWalletOutput" class="output"></div>
        </div>

        <div class="demo-section">
            <h3>2. ç°½ç½²è¨Šæ¯</h3>
            
            <div class="code-section">
                <div class="code-header">
                    <h4>ğŸ’» JavaScript ç¯„ä¾‹</h4>
                    <button class="copy-btn" onclick="copyCode(this, 'sol-sign-code')">è¤‡è£½</button>
                </div>
                <pre><code id="sol-sign-code" class="language-javascript">// ä½¿ç”¨ TweetNaCl ç°½ç½²è¨Šæ¯
const nacl = require('tweetnacl');

const message = "Solana is fast!";
const messageBytes = new TextEncoder().encode(message);

// ç°½ç½²
const signature = nacl.sign.detached(
    messageBytes, 
    keypair.secretKey
);

// é©—è­‰
const valid = nacl.sign.detached.verify(
    messageBytes,
    signature,
    keypair.publicKey.toBytes()
);
console.log("ç°½åæœ‰æ•ˆ:", valid);</code></pre>
            </div>

            <div class="input-group">
                <label>è¨Šæ¯ï¼š</label>
                <input type="text" id="solMessage" value="Solana is fast!" placeholder="è¼¸å…¥è¦ç°½ç½²çš„è¨Šæ¯">
            </div>
            <button onclick="signSolMessage()">âœï¸ ç°½ç½²è¨Šæ¯</button>
            <button onclick="verifySolMessage()">âœ… é©—è­‰ç°½å</button>
            <div id="solMessageOutput" class="output"></div>
        </div>

        <div class="demo-section">
            <h3>3. å»ºç«‹ä¸¦ç°½ç½²è½‰å¸³äº¤æ˜“</h3>
            
            <div class="code-section">
                <div class="code-header">
                    <h4>ğŸ’» JavaScript ç¯„ä¾‹</h4>
                    <button class="copy-btn" onclick="copyCode(this, 'sol-tx-code')">è¤‡è£½</button>
                </div>
                <pre><code id="sol-tx-code" class="language-javascript">// Solana è½‰å¸³äº¤æ˜“
const { 
    Transaction, 
    SystemProgram, 
    LAMPORTS_PER_SOL 
} = require('@solana/web3.js');

// å»ºç«‹è½‰å¸³æŒ‡ä»¤
const instruction = SystemProgram.transfer({
    fromPubkey: keypair.publicKey,
    toPubkey: new PublicKey('11111...'),
    lamports: 0.01 * LAMPORTS_PER_SOL
});

// å»ºç«‹äº¤æ˜“
const transaction = new Transaction().add(instruction);
transaction.recentBlockhash = await getRecentBlockhash();
transaction.feePayer = keypair.publicKey;

// ç°½ç½²
transaction.sign(keypair);

// ç™¼é€äº¤æ˜“
const signature = await connection.sendTransaction(transaction);</code></pre>
            </div>

            <div class="input-group">
                <label>æ”¶æ¬¾åœ°å€ï¼š</label>
                <input type="text" id="solToAddress" value="11111111111111111111111111111112" placeholder="Base58 åœ°å€">
            </div>
            <div class="input-group">
                <label>é‡‘é¡ (SOL)ï¼š</label>
                <input type="text" id="solAmount" value="0.01" placeholder="0.01">
            </div>
            <button onclick="createSolTransaction()">ğŸ“ å»ºç«‹ä¸¦ç°½ç½²äº¤æ˜“</button>
            <div id="solTxOutput" class="output"></div>
        </div>
    </div>

    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
    <script src="https://unpkg.com/base-x@3.0.9/index.js"></script>
    <script>
        const BASE58_ALPHABET = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';
        window.bs58 = baseX(BASE58_ALPHABET);
    </script>
    <script src="https://cdn.jsdelivr.net/npm/tweetnacl@1.0.3/nacl-fast.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="../scripts/solana.js"></script>
    <script>
        function copyCode(btn, codeId) {
            const code = document.getElementById(codeId).textContent;
            navigator.clipboard.writeText(code).then(() => {
                btn.textContent = 'å·²è¤‡è£½ï¼';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'è¤‡è£½';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }
    </script>
</body>
</html>
